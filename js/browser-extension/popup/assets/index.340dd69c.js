var Se=Object.defineProperty;var xe=(e,t,n)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var X=(e,t,n)=>(xe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function j(){}function ge(e){return e()}function re(){return Object.create(null)}function W(e){e.forEach(ge)}function be(e){return typeof e=="function"}function K(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function qe(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function q(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function we(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function T(e){return document.createTextNode(e)}function E(){return T(" ")}function Te(){return T("")}function C(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function w(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Le(e){return Array.from(e.childNodes)}function ee(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function se(e,t){e.value=t==null?"":t}function ie(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t){o.selected=!0;return}}e.selectedIndex=-1}function je(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let M;function I(e){M=e}function Ee(){if(!M)throw new Error("Function called outside component initialization");return M}function ve(e){Ee().$$.on_mount.push(e)}const O=[],le=[],P=[],ce=[],ze=Promise.resolve();let Z=!1;function Ne(){Z||(Z=!0,ze.then(ye))}function B(e){P.push(e)}const Y=new Set;let F=0;function ye(){const e=M;do{for(;F<O.length;){const t=O[F];F++,I(t),Ue(t.$$)}for(I(null),O.length=0,F=0;le.length;)le.pop()();for(let t=0;t<P.length;t+=1){const n=P[t];Y.has(n)||(Y.add(n),n())}P.length=0}while(O.length);for(;ce.length;)ce.pop()();Z=!1,Y.clear(),I(e)}function Ue(e){if(e.fragment!==null){e.update(),W(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}const H=new Set;let z;function ae(){z={r:0,c:[],p:z}}function ue(){z.r||W(z.c),z=z.p}function L(e,t){e&&e.i&&(H.delete(e),e.i(t))}function N(e,t,n,o){if(e&&e.o){if(H.has(e))return;H.add(e),z.c.push(()=>{H.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function te(e){e&&e.c()}function R(e,t,n,o){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),o||B(()=>{const l=e.$$.on_mount.map(ge).filter(be);e.$$.on_destroy?e.$$.on_destroy.push(...l):W(l),e.$$.on_mount=[]}),i.forEach(B)}function V(e,t){const n=e.$$;n.fragment!==null&&(W(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function We(e,t){e.$$.dirty[0]===-1&&(O.push(e),Ne(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function G(e,t,n,o,r,i,l,c=[-1]){const h=M;I(e);const f=e.$$={fragment:null,ctx:[],props:i,update:j,not_equal:r,bound:re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:re(),dirty:c,skip_bound:!1,root:t.target||h.$$.root};l&&l(f.root);let d=!1;if(f.ctx=n?n(e,t.props||{},(s,m,...a)=>{const v=a.length?a[0]:m;return f.ctx&&r(f.ctx[s],f.ctx[s]=v)&&(!f.skip_bound&&f.bound[s]&&f.bound[s](v),d&&We(e,s)),m}):[],f.update(),d=!0,W(f.before_update),f.fragment=o?o(f.ctx):!1,t.target){if(t.hydrate){const s=Le(t.target);f.fragment&&f.fragment.l(s),s.forEach(S)}else f.fragment&&f.fragment.c();t.intro&&L(e.$$.fragment),R(e,t.target,t.anchor,t.customElement),ye()}I(h)}class J{$destroy(){V(this,1),this.$destroy=j}$on(t,n){if(!be(n))return j;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!qe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ae="{search}",Ce="shops",D=["swiss_wine.json"],ke=window.browser!==void 0;class $e{constructor(t=""){X(this,"name");X(this,"searchUrl");t&&(this.searchUrl=t,this.name=new URL(t).host.replace("www.",""))}}async function Oe(e){return(await(await fetch(`${Ce}/${e}`)).json()).shops.map(o=>new $e(o)).sort((o,r)=>o.name.localeCompare(r.name))}function Ie(e,t){return t.map(n=>{const o=new $e;return o.name=n.name,o.searchUrl=n.searchUrl.replace(Ae,e),o})}function Me(e){let t=e.replace("_"," ");return t.substring(0,t.lastIndexOf("."))}function Fe(){let e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}function fe(e,t,n){const o=e.slice();return o[5]=t[n],o}function he(e){let t,n,o=e[5].name+"",r,i;return{c(){t=_("li"),n=_("a"),r=T(o),w(n,"class","shop-link"),w(n,"target","_blank"),w(n,"href",i=e[5].searchUrl)},m(l,c){q(l,t,c),p(t,n),p(n,r)},p(l,c){c&1&&o!==(o=l[5].name+"")&&ee(r,o),c&1&&i!==(i=l[5].searchUrl)&&w(n,"href",i)},d(l){l&&S(t)}}}function Pe(e){let t,n,o,r,i,l,c,h,f=e[0],d=[];for(let s=0;s<f.length;s+=1)d[s]=he(fe(e,f,s));return{c(){t=_("button"),n=T(e[2]),o=E(),r=_("div"),i=_("ul");for(let s=0;s<d.length;s+=1)d[s].c();w(t,"class","text-only"),w(i,"class","flat"),w(r,"class",l="shop-list "+(e[1]?"":"hidden"))},m(s,m){q(s,t,m),p(t,n),q(s,o,m),q(s,r,m),p(r,i);for(let a=0;a<d.length;a+=1)d[a].m(i,null);c||(h=C(t,"click",e[3]),c=!0)},p(s,[m]){if(m&4&&ee(n,s[2]),m&1){f=s[0];let a;for(a=0;a<f.length;a+=1){const v=fe(s,f,a);d[a]?d[a].p(v,m):(d[a]=he(v),d[a].c(),d[a].m(i,null))}for(;a<d.length;a+=1)d[a].d(1);d.length=f.length}m&2&&l!==(l="shop-list "+(s[1]?"":"hidden"))&&w(r,"class",l)},i:j,o:j,d(s){s&&S(t),s&&S(o),s&&S(r),we(d,s),c=!1,h()}}}function He(e,t,n){let{shopsWithSearchTerms:o=[]}=t,r=!1,i="";ve(()=>{l(!1)});const l=(h=null)=>{h===null&&(h=!r),n(1,r=h),n(2,i=h?"- Hide shops":"+ Show shops")},c=()=>{l()};return e.$$set=h=>{"shopsWithSearchTerms"in h&&n(0,o=h.shopsWithSearchTerms)},[o,r,i,c]}class Be extends J{constructor(t){super(),G(this,t,He,Pe,K,{shopsWithSearchTerms:0})}}function De(e){let t;return{c(){t=_("div"),t.innerHTML=`<strong>It seems you are using a mobile browser<br/>
        Unfortunately the search probably won&#39;t work correctly<br/>
        Browser prevent (rightfully so) opening multiple tabs/windows programmatically<br/>and
        while this can be allowed on a per page base on desktop it seems mobile browser always prevent it</strong>`,w(t,"class","box box--info")},m(n,o){q(n,t,o)},p:j,i:j,o:j,d(n){n&&S(t)}}}class Ke extends J{constructor(t){super(),G(this,t,null,De,K,{})}}function pe(e,t,n){const o=e.slice();return o[12]=t[n],o}function de(e){let t,n;return t=new Ke({}),{c(){te(t.$$.fragment)},m(o,r){R(t,o,r),n=!0},i(o){n||(L(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){V(t,o)}}}function me(e){let t,n=Me(e[12])+"",o;return{c(){t=_("option"),o=T(n),t.__value=e[12],t.value=t.__value},m(r,i){q(r,t,i),p(t,o)},p:j,d(r){r&&S(t)}}}function _e(e){let t,n,o,r,i,l,c,h,f,d,s,m;return s=new Be({props:{shopsWithSearchTerms:e[3]}}),{c(){t=_("div"),n=_("div"),o=T("Please be aware that searching will open "),r=_("strong"),i=T(e[1]),l=T(" windows/tabs"),c=T(" simultaneously"),h=_("br"),f=T(`
            For security reasons you need to allow popups when prompted by the browser (on top of the page)`),d=E(),te(s.$$.fragment),w(n,"class","small search-info svelte-1fqt62q"),w(t,"class","box box--info")},m(a,v){q(a,t,v),p(t,n),p(n,o),p(n,r),p(r,i),p(r,l),p(n,c),p(n,h),p(n,f),p(t,d),R(s,t,null),m=!0},p(a,v){(!m||v&2)&&ee(i,a[1]);const x={};v&8&&(x.shopsWithSearchTerms=a[3]),s.$set(x)},i(a){m||(L(s.$$.fragment,a),m=!0)},o(a){N(s.$$.fragment,a),m=!1},d(a){a&&S(t),V(s)}}}function Re(e){let t,n,o,r,i,l,c,h,f,d,s,m,a,v,x,A,Q,ne,b=e[4]&&de(),U=D,$=[];for(let u=0;u<U.length;u+=1)$[u]=me(pe(e,U,u));let g=e[1]>0&&_e(e);return{c(){b&&b.c(),t=E(),n=_("div"),o=T(`Shop
    `),r=_("select");for(let u=0;u<$.length;u+=1)$[u].c();i=_("br"),l=E(),c=_("input"),h=E(),f=_("br"),d=E(),s=_("button"),m=T("Search"),v=E(),g&&g.c(),x=Te(),w(r,"class","search-select svelte-1fqt62q"),e[0]===void 0&&B(()=>e[7].call(r)),w(c,"type","text"),w(c,"placeholder","enter search term"),w(c,"class","search-input svelte-1fqt62q"),w(s,"class","search svelte-1fqt62q"),s.disabled=a=e[3].length>0&&e[2]?"":"disabled"},m(u,k){b&&b.m(u,k),q(u,t,k),q(u,n,k),p(n,o),p(n,r);for(let y=0;y<$.length;y+=1)$[y].m(r,null);ie(r,e[0]),p(n,i),p(n,l),p(n,c),se(c,e[2]),p(n,h),p(n,f),p(n,d),p(n,s),p(s,m),q(u,v,k),g&&g.m(u,k),q(u,x,k),A=!0,Q||(ne=[C(r,"change",e[7]),C(c,"input",e[8]),C(c,"keypress",e[6]),C(s,"click",e[5])],Q=!0)},p(u,[k]){if(u[4]?b?k&16&&L(b,1):(b=de(),b.c(),L(b,1),b.m(t.parentNode,t)):b&&(ae(),N(b,1,1,()=>{b=null}),ue()),k&0){U=D;let y;for(y=0;y<U.length;y+=1){const oe=pe(u,U,y);$[y]?$[y].p(oe,k):($[y]=me(oe),$[y].c(),$[y].m(r,null))}for(;y<$.length;y+=1)$[y].d(1);$.length=U.length}k&1&&ie(r,u[0]),k&4&&c.value!==u[2]&&se(c,u[2]),(!A||k&12&&a!==(a=u[3].length>0&&u[2]?"":"disabled"))&&(s.disabled=a),u[1]>0?g?(g.p(u,k),k&2&&L(g,1)):(g=_e(u),g.c(),L(g,1),g.m(x.parentNode,x)):g&&(ae(),N(g,1,1,()=>{g=null}),ue())},i(u){A||(L(b),L(g),A=!0)},o(u){N(b),N(g),A=!1},d(u){b&&b.d(u),u&&S(t),u&&S(n),we($,u),u&&S(v),g&&g.d(u),u&&S(x),Q=!1,W(ne)}}}const Ve=300;function Ge(e,t,n){let o=D.length>0?D[0]:"",r=0,i="",l=[],c=[],h=!0;const f=async()=>{o&&(l=await Oe(o),n(1,r=l.length))};ve(()=>{n(4,h=Fe()),f(),o&&document.querySelector(".search-input").focus()});const d=()=>{i&&i.length>0&&document.querySelectorAll("a.shop-link").forEach(x=>{ke?browser.tabs.create({url:x.href,active:!1}):window.open(x.href,"_blank")})};let s;const m=x=>{x.which!==0&&(n(3,c=[]),s&&clearTimeout(s),s=setTimeout(()=>{n(3,c=Ie(i,l))},Ve))};function a(){o=je(this),n(0,o)}function v(){i=this.value,n(2,i)}return[o,r,i,c,h,d,m,a,v]}class Je extends J{constructor(t){super(),G(this,t,Ge,Re,K,{})}}function Qe(e){let t;return{c(){t=_("h1"),t.textContent="Search Shops"},m(n,o){q(n,t,o)},d(n){n&&S(t)}}}function Xe(e){let t,n,o,r,i,l=!ke&&Qe();return r=new Je({}),{c(){t=_("main"),l&&l.c(),n=E(),o=_("div"),te(r.$$.fragment),w(o,"class","card")},m(c,h){q(c,t,h),l&&l.m(t,null),p(t,n),p(t,o),R(r,o,null),i=!0},p:j,i(c){i||(L(r.$$.fragment,c),i=!0)},o(c){N(r.$$.fragment,c),i=!1},d(c){c&&S(t),l&&l.d(),V(r)}}}class Ye extends J{constructor(t){super(),G(this,t,null,Xe,K,{})}}new Ye({target:document.getElementById("app")});
